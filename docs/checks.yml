project: Signalry
version: 1.2
philosophy:
  purpose: "Send emails and know if they were read"
  data_collection_policy:
    - no_user_profiling
    - no_cross_message_correlation
    - no_behavioral_fingerprinting
    - minimal_telemetry_only
    - only collect aggregate validation results for download

plans:
  free:
    limits:
      smtp_accounts: 1
      rotation_groups: 0
      daily_send_limit: 500
      active_campaigns: 3
      retention_days:
        logs: 7
        analytics: 7
        validation_results: 7
      queue_priority: low
    features:
      uuid_tracking: true
      read_tracking: true
      scheduling: false
      advanced_analytics: false
      email_validation:
        single: true
        bulk: true
        downloadable_results: true
  premium:
    limits:
      smtp_accounts: unlimited
      rotation_groups: unlimited
      daily_send_limit: configurable
      active_campaigns: unlimited
      retention_days:
        logs: 90
        analytics: 365
        validation_results: 365
      queue_priority: high
    features:
      uuid_tracking: true
      read_tracking: true
      scheduling: true
      advanced_analytics: true
      smtp_rotation: true
      alerts: true
      email_validation:
        single: true
        bulk: true
        downloadable_results: true

entities:
  Users:
    fields:
      - id
      - username
      - password_hash
      - email
      - plan
      - permissions
      - created_at
      - updated_at
    constraints:
      data_isolation: strict
      row_level_security: enforced

  SMTPAccounts:
    fields:
      - id
      - user_id
      - smtp_host
      - smtp_port
      - smtp_user
      - smtp_password_encrypted
      - rotation_group
      - status
      - last_health_check
      - failure_count
      - created_at
      - updated_at
    rules:
      auto_disable_on_failure: true
      cooldown_required: true

  Campaigns:
    fields:
      - id
      - user_id
      - name
      - scheduled_at
      - status
      - created_at
      - updated_at
    safeguards:
      preflight_validation: true
      send_rate_limits: enforced
      dry_run_supported: true

  Messages:
    fields:
      - id
      - campaign_id
      - uuid
      - subject
      - body_plain
      - body_html
      - sender_smtp_id
      - status
      - retries
      - sent_at
      - created_at
      - updated_at
    lifecycle:
      - draft
      - queued
      - sent
      - failed
      - retried

  MessageOpens:
    fields:
      - id
      - message_id
      - user_agent_family
      - ip_hash
      - opened_at
      - beacon_pixel_id
    privacy:
      ip_storage: hashed
      user_agent_granularity: coarse
      correlation: disabled

  DomainChecks:
    fields:
      - id
      - user_id
      - domain
      - spf
      - dkim
      - dmarc
      - risk_score
      - risk_level
      - last_checked
      - created_at
      - updated_at
    rules:
      risk_computation: enforced
      unique_per_user: true
      retention_based_on_plan: true

  EmailValidationResults:
    fields:
      - id
      - user_id
      - email
      - status          # valid, invalid, unknown
      - domain_type     # free, premium, disposable
      - created_at
    privacy:
      no_ip: true
      no_timestamp_tracking_per_user: true
    rules:
      downloadable_csv: true
      retention_based_on_plan: true
      free_vs_premium_limitations: enforced

queues:
  processor: Celery
  broker: RabbitMQ
  types:
    message_send:
      timeout: configurable
      max_retries: configurable
      backoff_strategy: exponential
    retry:
      interval: configurable
      dead_letter_queue: enabled
    email_validation:
      timeout: configurable
      max_retries: configurable
  enforcement:
    plan_based_queue_priority: true
    rate_limiting: enforced

features:
  multi_user_isolation: true
  email_validation:
    single: true
    bulk: true
    downloadable_results: true
  retry_logic: true
  timeout_handling: true
  uuid_tracking: true
  read_tracking: true
  queue_processing: true
  scheduling: true

dashboard:
  campaign_overview:
    metrics:
      - total_sent
      - total_opened
      - total_failed
      - average_reads_per_message
  smtp_status:
    metrics:
      - health_check
      - rotation_status
      - failure_rate
  validation_results:
    features:
      - downloadable_csv
      - aggregated_metrics_only
  analytics:
    charts:
      - message_open_graph
      - top_campaigns
    constraints:
      retention_enforced: true
      plan_limited: true

security:
  ssl_tls: required
  row_level_security: enforced
  rate_limiting: strict
  input_validation: mandatory
  secrets_management: encrypted_at_rest

logging_monitoring:
  logs:
    - sending_errors
    - retries
    - failed_auth
    - system_events
  metrics:
    - queue_length
    - retry_rate
    - delivery_success_rate
  alerts:
    - failed_campaign
    - smtp_unreachable
    - threshold_exceeded

non_goals:
  - recipient_profiling
  - cross_campaign_tracking
  - behavioral_analysis
  - ad_tech_integrations


signalry/
├── README.md
│   Purpose:
│   - What Signalry is
│   - What it is NOT
│   - High-level usage and guarantees
│   - Privacy-first positioning

├── ROADMAP.md
│   Purpose:
│   - Phase-based development plan
│   - Feature sequencing
│   - Explicit “not yet” list

├── .env.example
│   Purpose:
│   - Environment variables contract
│   - Never contains secrets

├── .gitignore
│   Purpose:
│   - Keep garbage and secrets out of Git

├── docs/
│   ├── architecture.yaml
│   │   Purpose:
│   │   - Canonical system blueprint
│   │   - Source of truth for the entire project
│   │
│   ├── plans.md
│   │   Purpose:
│   │   - Free vs Premium definitions
│   │   - Limits, retention, queue priority
│   │
│   ├── privacy.md
│   │   Purpose:
│   │   - Data collection guarantees
│   │   - What is hashed, truncated, or never stored
│   │
│   ├── queues.md
│   │   Purpose:
│   │   - Celery + RabbitMQ behavior
│   │   - Retry rules, backoff, DLQ logic
│   │
│   ├── non_goals.md
│   │   Purpose:
│   │   - Explicitly rejected features
│   │   - Prevents scope creep and ad-tech nonsense
│   │
│   └── domain/
│       ├── users.md
│       │   Purpose:
│       │   - User lifecycle
│       │   - Isolation rules
│       │   - Permissions model
│       │
│       ├── smtp_accounts.md
│       │   Purpose:
│       │   - SMTP health logic
│       │   - Rotation rules
│       │   - Auto-disable behavior
│       │
│       ├── campaigns.md
│       │   Purpose:
│       │   - Campaign lifecycle
│       │   - Safeguards and rate limits
│       │
│       ├── messages.md
│       │   Purpose:
│       │   - Message states
│       │   - UUID rules
│       │   - Retry semantics
│       │
│       ├── message_opens.md
│       │   Purpose:
│       │   - Read tracking rules
│       │   - Privacy constraints
│       │   - Beacon behavior
│       │
│       └── email_validation.md
│           Purpose:
│           - Deliverability & SMTP validation
│           - Single & bulk endpoints
│           - Status: valid, invalid, unknown
│           - Domain type: free, premium, disposable
│           - Downloadable CSV
│           - Retention per plan
│           - Privacy-first: no IPs or timestamps

├── backend/
│   ├── manage.py
│   ├── config/
│   │   ├── settings/
│   │   │   - base.py, dev.py, prod.py
│   │   ├── urls.py
│   │   └── celery.py
│   ├── common/
│   │   ├── permissions.py
│   │   ├── rate_limits.py
│   │   ├── encryption.py
│   │   └── constants.py
│   └── apps/
│       ├── users/
│       ├── plans/
│       ├── smtp/
│       ├── campaigns/
│       ├── messages/
│       ├── tracking/
│       ├── email_validation/
│       │   Purpose:
│       │   - Deliverability module
│       │   - Single & bulk email validation
│       │   - Domain classification
│       │   - CSV download
│       │   - Retention per plan
│       │   - Privacy-first
│       ├── queues/
│       ├── analytics/
│       └── monitoring/

├── infra/
│   ├── docker/
│   ├── rabbitmq/
│   └── nginx/

└── scripts/
    ├── seed_dev_data.py
    └── maintenance_tasks.py


                                                                         
┌──(xoodrey㉿xoodrey)-[~/Documents/Django Projects/development/signalry]
└─$ ls
analytics   db.sqlite3      message_system  README.md  users
campaigns   deliverability  monitoring      smtp       venv
commit.txt  docs            plans           smtp.txt
core        manage.py       queues          tracking
                                                                         
┌──(xoodrey㉿xoodrey)-[~/Documents/Django Projects/development/signalry]
└─$ 
                                                                         
┌──(xoodrey㉿xoodrey)-[~/Documents/Django Projects/development/signalry]
└─$ tree -I "venv"

.
├── analytics
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── management
│   │   └── commands
│   │       └── compute_analytics.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   ├── serializers.cpython-311.pyc
│   │   ├── tests.cpython-311.pyc
│   │   ├── urls.cpython-311.pyc
│   │   └── views.cpython-311.pyc
│   ├── serializers.py
│   ├── tests.py
│   ├── urls.py
│   └── views.py
├── campaigns
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   └── tests.cpython-311.pyc
│   ├── tests.py
│   └── views.py
├── commit.txt
├── core
│   ├── asgi.py
│   ├── encryption.py
│   ├── __init__.py
│   ├── __pycache__
│   │   ├── encryption.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── settings.cpython-311.pyc
│   │   ├── urls.cpython-311.pyc
│   │   └── wsgi.cpython-311.pyc
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── db.sqlite3
├── deliverability
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   ├── services.cpython-311.pyc
│   │   ├── tests.cpython-311.pyc
│   │   ├── tests_deliverability.cpython-311.pyc
│   │   ├── urls.cpython-311.pyc
│   │   └── views.cpython-311.pyc
│   ├── services.py
│   ├── tests.py
│   ├── urls.py
│   └── views.py
├── docs
│   ├── architecture.yaml
│   ├── checks.yml
│   └── PROJECT_STRUCTURE.md
├── manage.py
├── message_system
│   ├── admin.py
│   ├── api.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── api.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   ├── serializers.cpython-311.pyc
│   │   ├── tests_beacon.cpython-311.pyc
│   │   ├── tests.cpython-311.pyc
│   │   ├── urls.cpython-311.pyc
│   │   └── views.cpython-311.pyc
│   ├── serializers.py
│   ├── tests.py
│   ├── urls.py
│   └── views.py
├── monitoring
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   └── tests.cpython-311.pyc
│   ├── tests.py
│   └── views.py
├── plans
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   └── tests.cpython-311.pyc
│   ├── tests.py
│   └── views.py
├── queues
│   ├── admin.py
│   ├── apps.py
│   ├── constants.py
│   ├── executor.py
│   ├── __init__.py
│   ├── management
│   │   └── commands
│   │       ├── process_queue.py
│   │       └── __pycache__
│   │           └── process_queue.cpython-311.pyc
│   ├── migrations
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── executor.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   ├── selectors.cpython-311.pyc
│   │   ├── services.cpython-311.pyc
│   │   └── tests.cpython-311.pyc
│   ├── selectors.py
│   ├── services.py
│   ├── tests.py
│   └── views.py
├── README.md
├── smtp
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   └── tests.cpython-311.pyc
│   ├── tests.py
│   └── views.py
├── smtp.txt
├── tracking
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   │   └── __pycache__
│   │       ├── 0001_initial.cpython-311.pyc
│   │       └── __init__.cpython-311.pyc
│   ├── models.py
│   ├── __pycache__
│   │   ├── admin.cpython-311.pyc
│   │   ├── apps.cpython-311.pyc
│   │   ├── __init__.cpython-311.pyc
│   │   ├── models.cpython-311.pyc
│   │   ├── serializers.cpython-311.pyc
│   │   ├── tests.cpython-311.pyc
│   │   ├── urls.cpython-311.pyc
│   │   └── views.cpython-311.pyc
│   ├── serializers.py
│   ├── tests.py
│   ├── urls.py
│   └── views.py
└── users
    ├── admin.py
    ├── apps.py
    ├── __init__.py
    ├── models.py
    ├── __pycache__
    │   ├── admin.cpython-311.pyc
    │   ├── apps.cpython-311.pyc
    │   ├── __init__.cpython-311.pyc
    │   ├── models.cpython-311.pyc
    │   ├── signals.cpython-311.pyc
    │   └── tests.cpython-311.pyc
    ├── signals.py
    ├── tests.py
    └── views.py

47 directories, 199 files
                                                                         
┌──(xoodrey㉿xoodrey)-[~/Documents/Django Projects/development/signalry]
└─$ 


now that we build all apps what next?